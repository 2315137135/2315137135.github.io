(function(e){function t(t){for(var i,o,s=t[0],c=t[1],l=t[2],p=0,d=[];p<s.length;p++)o=s[p],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&d.push(a[o][0]),a[o]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);u&&u(t);while(d.length)d.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],i=!0,s=1;s<n.length;s++){var c=n[s];0!==a[c]&&(i=!1)}i&&(r.splice(t--,1),e=o(o.s=n[0]))}return e}var i={},a={app:0},r=[];function o(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=c;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("85ec")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{width:"100%",height:"100%"},attrs:{id:"app"}},[n("button",{attrs:{id:"fullscreen"},on:{click:e.switchFullScreen}},[e._v("全屏")]),n("canvas",{ref:"canvas",staticStyle:{width:"100%",height:"100%"},attrs:{id:"canvas"}})])},r=[],o=n("d4ec"),s=n("bee2"),c=n("ade3"),l=(n("d3b7"),n("159b"),n("bf93")),u=(n("074d"),n("4e46"),n("262e")),p=n("2caf"),d=(n("c8b5"),function(e){Object(u["a"])(n,e);var t=Object(p["a"])(n);function n(e,i,a){var r;return Object(o["a"])(this,n),r=t.call(this,e,i,a),r.inputs.clear(),r.inputs.addGamepad(),r.inputs.addKeyboard(),r.inputs.addMouse(!0),r.keysUp.push(87),r.keysDown.push(83),r.keysLeft.push(65),r.keysRight.push(68),r.checkCollisions=!0,r.applyGravity=!0,console.log(r.touchAngularSensibility),r.fovMode=n.FOVMODE_VERTICAL_FIXED,r.fov=.5*Math.PI,r.minZ=.1,r.speed=.5,r.inertia=.8,r.angularSensibility=500,r.ellipsoid=new l["Vector3"](.3,1,.3),a.actionManager=new l["ActionManager"](a),console.log(a.actionManager),a.onPointerObservable.add((function(e){if(e.type===l["PointerEventTypes"].POINTERPICK&&l["Vector3"].Dot(e.pickInfo.getNormal(),l["Vector3"].Up())>-.1){var t=e.pickInfo.pickedPoint,n=e.pickInfo.getNormal(!0);r.TeleportTo(t.add(n.scale(.5)))}})),r}return Object(s["a"])(n,[{key:"TeleportTo",value:function(e){var t=this,n=this.position.clone(),i=e.clone().add(l["Vector3"].Up().scale(2)),a=l["Vector3"].Distance(n,i),r=0;Object(l["setAndStartTimer"])({timeout:750,contextObservable:this._scene.onBeforeRenderObservable,onTick:function(e){var n=e.completeRate-r,o=i.subtract(t.position).normalizeToNew().multiply(new l["Vector3"](1,0,1).scale(n*a));t.cameraDirection=o,t._updatePosition(),r=e.completeRate}})}}]),n}(l["UniversalCamera"])),h=n("1da1"),f=(n("96cf"),{id:"35",template_name:"手机店",template_description:"展馆描述",send_locate:[{title:"A1",locate_type:2},{title:"A2",locate_type:2},{title:"A3",locate_type:3},{title:"A4",locate_type:3},{title:"A5",locate_type:2},{title:"A6",locate_type:5}]}),b=(n("bc3a"),{TEXT:1,IMG:2,VIDEO:3,AUDIO:4,MODEL:5}),v=function(){function e(t){var n=this;Object(o["a"])(this,e),this.locates=[],f.send_locate.forEach((function(e){var i=t.getNodeByName(e.title);i&&n.locates.push(new m(e.title,e.locate_type,i))})),this.update()}return Object(s["a"])(e,[{key:"update",value:function(){this.locates.forEach((function(e){e.update()}))}}]),e}(),m=function(){function e(t,n,i){Object(o["a"])(this,e),this.title=t,this.locate_type=n,this.node=i}return Object(s["a"])(e,[{key:"update",value:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(){var t,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:e.t0=this.locate_type,e.next=e.t0===b.TEXT?3:e.t0===b.IMG?4:e.t0===b.AUDIO?6:e.t0===b.VIDEO?7:e.t0===b.MODEL?9:10;break;case 3:return e.abrupt("break",10);case 4:return this.node instanceof l["Mesh"]&&(t=this.node.material,t instanceof l["StandardMaterial"]?t.diffuseTexture=new l["Texture"]("123.jpg",this.node._scene,!1,!1):t instanceof l["PBRMaterial"]&&(t.albedoTexture=new l["Texture"]("123.jpg",this.node._scene,!1,!1))),e.abrupt("break",10);case 6:return e.abrupt("break",10);case 7:return this.node instanceof l["Mesh"]&&(n=this.node.material,n instanceof l["StandardMaterial"]?n.emissiveTexture=new l["VideoTexture"](this.title+"_video","123.mp4",this.node._scene,!1,!0):n instanceof l["PBRMaterial"]&&(i=new l["VideoTexture"](this.title+"_video","123.mp4",this.node._scene,!1,!0),n.albedoTexture=i,n.emissiveTexture=i,n.emissiveIntensity=1,n.emissiveColor=l["Color3"].White(),i.video.muted=!0,i.video.play(),n.roughness=.1,i.video.muted=!0)),e.abrupt("break",10);case 9:return e.abrupt("break",10);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),y=function(){function e(t){var n=this;Object(o["a"])(this,e),Object(c["a"])(this,"tick",(function(){n.scene.render()})),this.canvas=t,this.engine=new l["Engine"](this.canvas,!0),this.scene=new l["Scene"](this.engine),this.player=new d("player",new l["Vector3"](0,2,-5),this.scene),this.player.target=l["Vector3"].Zero(),this.player.attachControl(this.canvas);var i=l["MeshBuilder"].CreateGround("",{width:100,height:100});i.checkCollisions=!0,i.position.y=-.1,i.visibility=0,this.scene.environmentTexture=new l["CubeTexture"]("environment.env",this.scene),this.scene.createDefaultSkybox(new l["CubeTexture"]("environment.env",this.scene)),this.scene.ambientColor=l["Color3"].White().scale(1);var a=new l["DefaultRenderingPipeline"]("pipeLine",!0,this.scene,this.scene.cameras);a.imageProcessing.toneMappingEnabled=!0,a.imageProcessing.vignetteEnabled=!0,a.samples=4,a.sharpenEnabled=!1,a.bloomEnabled=!0,l["SceneLoader"].Append("/","shoujidian2.glb",this.scene,(function(e){console.log("场景加载完成"),n.initLightMap(e),n.initCollision(e),new v(n.scene)})),this.scene.collisionsEnabled=!0,this.engine.runRenderLoop(this.tick),window.addEventListener("resize",(function(e){return n.engine.resize()})),window.addEventListener("keydown",(function(e){"i"===e.key&&(n.scene.debugLayer.isVisible()?n.scene.debugLayer.hide():n.scene.debugLayer.show({handleResize:!0,embedMode:!0}))}))}return Object(s["a"])(e,[{key:"initLightMap",value:function(e){e.meshes.forEach((function(e){e.material instanceof l["PBRMaterial"]&&e.material.emissiveTexture&&(e.material.lightmapTexture=e.material.emissiveTexture,e.material.useLightmapAsShadowmap=!0,e.material.emissiveTexture=null,e.material.emissiveColor=l["Color3"].Black(),e.material.ambientColor=l["Color3"].White())}))}},{key:"initCollision",value:function(e){this.scene.getNodeByName("Collision").getChildMeshes().forEach((function(e){e.checkCollisions=!0,e instanceof l["Mesh"]&&(e.visibility=0)}))}}]),e}(),g={name:"App",components:{},methods:{switchFullScreen:function(){this.$refs.canvas.requestFullscreen({})}},mounted:function(){new y(document.getElementById("canvas"))}},w=g,O=(n("034f"),n("2877")),k=Object(O["a"])(w,a,r,!1,null,null,null),T=k.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(e){return e(T)}}).$mount("#app")},"85ec":function(e,t,n){}});
//# sourceMappingURL=app.c255e439.js.map